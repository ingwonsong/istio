trustDomain: "{{.TrustDomain}}"
trustDomainAliases:
  - cluster.local

configSources:
  - address: k8s://
  - address: fs:///var/lib/istio/config/data

defaultConfig:
  proxyMetadata:
    CA_PROVIDER: "{{.CA}}"
    CA_TRUSTANCHOR: "{{.CATrustAnchor}}"
    XDS_ROOT_CA: /etc/ssl/certs/ca-certificates.crt
    CA_ROOT_CA: /etc/ssl/certs/ca-certificates.crt
    OUTPUT_CERTS: /etc/istio/proxy
    XDS_AUTH_PROVIDER: "{{.XDSAuthProvider}}"
    PROXY_CONFIG_XDS_AGENT: "true"
    GCP_METADATA: "{{.Project}}|{{.ProjectNumber}}|{{.Cluster}}|{{.Zone}}"
    {{if .GKEClusterURL}}GKE_CLUSTER_URL: "{{.GKEClusterURL}}"{{end}}
    {{if .FleetProjectNumber}}FLEET_PROJECT_NUMBER: "{{.FleetProjectNumber}}"{{end}}

  meshId: "proj-{{.ProjectNumber}}"
  discoveryAddress: "{{.XDSAddr}}"
