apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  name: custom-gw
spec:
  components:
    ingressGateways:
    - enabled: true
      k8s:
        nodeSelector:
          cloud.google.com/gke-nodepool: gateway
        service:
          ports:
          - name: redis-tls
            port: 6378
            targetPort: 6378
        tolerations:
        - key: dedicated
          operator: Equal
          value: gateway
      label:
        istio: custom
      name: custom-gw
      namespace: custom
  profile: empty
  revision: asm-managed-rapid
  values:
    gateways:
      istio-egressgateway:
        injectionTemplate: gateway
      istio-ingressgateway:
        injectionTemplate: gateway
    global: {}
